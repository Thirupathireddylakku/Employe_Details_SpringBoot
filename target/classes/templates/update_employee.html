<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Employee Management System</title>

<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">

	<style>
	.required::after{
	content:"*";
	color:red
	
	}
	
	</style>




</head>





<body  style="background-color:powderblue">

	<script th:internal ="javascript">
	function findAge() {
		// get the birthdate from the input element
		const birthdate = new Date(document.getElementById('birthdate').value);

		// calculate the age based on the current date
		const ageInMilliseconds = Date.now() - birthdate.getTime();
		const ageDate = new Date(ageInMilliseconds);
		const age = Math.abs(ageDate.getUTCFullYear() - 1970);

		// set the value of the age field
		
		//console.log(age);
		document.getElementById('agee').value = age;

	}	
	
	</script> 


	<div class="container">
		<h2><u>Employee Management System</u></h2>
		<hr>
		<h4>Update Employee</h4>

		<form action="#" th:action="@{/saveEmployee}" th:object="${employee}"
			method="POST">
			
			<!-- Add hidden form field to handle update -->
			<input type="hidden" th:field="*{id}" /> 
			<label for="name" class="required">Employee Name</label> <br>
			<input type="text" th:field="*{empName}" size="50" id="name" required
			placeholder="Employee  Name" class="form-control mb-4 col-4"> 
			
			<label for="email" class="required">Email</label> <br>
			<input type="email" th:field="*{email}" id="email" required
		     placeholder="&#xF32C Email"	class="form-control mb-4 col-4">
		     
			 <label for="birthdate" class="required">Date of Birth:</label> <br>
			 <input type="date" th:field="*{dob}" id="birthdate" name="birthdate" 
			 placeholder="DOB" class="form-control mb-4 col-4" required> 
			 
			 <label for="agee" class="required">Age:</label><br>
			 <input type="text" id="agee" th:field="*{age}" name="agee" readonly
			 class="form-control mb-4 col-4" placeholder="Employee age" onmouseover="findAge()">
			 
			  <label class="required">Salary</label><br> 
              <input type="number" step=0.01 th:field="*{salary}" required
			  placeholder="Employee salary" class="form-control mb-4 col-4" />
			  
			  <label class="required">Status</label><br>
			   <select name="status" th:field="*{state}" required
			       class="form-control mb-4 col-4">

				   <option value="">--statues--</option>
				   <option value="ACTIVE">ACTIVE</option>
				   <option value="INACTIVE">INACTIVE</option>
			   </select>




			<button type="submit" class="btn btn-info col-2"> Update Employee</button>
		</form>
		
		<hr>
		
		<a th:href = "@{/}"> Back to Employee List</a>
	</div>
</body>
</html>